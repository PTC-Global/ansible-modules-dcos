- hosts: localhost
  tasks:
    - name: Get DCOS credentials
      dcos_facts:
    - debug: msg="{{ dcos_credentials }}"

    - name: install user marathon
      dcos_package:
        package: marathon
        app_id: "/dcosmodtest/marathon-dcosmodtest"
        options:
          service:
            name: "marathon-dcosmodtest"
            cpus: 2.0
            mem: 1536
            instances: 1
          marathon:
            reporter-graphite: "tcp://carbon-relay-{{ region }}.{{ admin_project }}.cloud.twc.net:2003?prefix=marathon.{{ mesos_project }}.{{ region }}.marathon-dcosmodtest&interval=15"
        dcos_credentials: "{{ dcos_credentials }}"
      register: result
    - debug: var=result

    - name: uninstall user marathon
      dcos_package:
        package: marathon
        app_id: "/dcosmodtest/marathon-dcosmodtest"
        state: absent
        dcos_credentials: "{{ dcos_credentials }}"
      register: result
    - debug: var=result
