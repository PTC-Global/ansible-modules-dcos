- hosts: localhost
  tasks:
    - name: Get DCOS credentials
      dcos_facts:
    - debug: msg="{{ dcos_credentials }}"

    - name: create a test user
      dcos_user:
        uid: test-user-dcos
        password: "L4m3Password"
        description: "DCOS Test User"
        state: present
        dcos_credentials: "{{ dcos_credentials }}"
      register: result
    - debug: var=result

    - name: modify the test user description and implicit state
      dcos_user:
        uid: test-user-dcos
        password: "L4m3Password"
        description: "DCOS Module Test"
        dcos_credentials: "{{ dcos_credentials }}"
      register: result
    - debug: var=result

    - name: change the test user password and description
      dcos_user:
        uid: test-user-dcos
        password: "Gr8Password!"
        description: "DCOS Module Test User"
        reset_password: true
        state: present
        dcos_credentials: "{{ dcos_credentials }}"
      register: result
    - debug: var=result

    - name: remove the test user
      dcos_user:
        uid: test-user-dcos
        state: absent
        dcos_credentials: "{{ dcos_credentials }}"
      register: result
    - debug: var=result
